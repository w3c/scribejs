<!DOCTYPE html>
<html data-lt-installed="true">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Generate Markdown Formatted Minutes for the DID WG</title>
    <meta content="Ivan Herman" name="author">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha256-9mbkOfVho3ZPXfM7W8sV2SndrGDuh7wuyLjtsWeTI1Q=" crossorigin="anonymous" />
    <script type="text/javascript" src="js/scribejs.js"></script>
    <style>
    details summary {cursor: pointer}
    dl dl dt::before {content: "“"}
    dl dl dt::after {content: "”"}
    fieldset {border-width: 1px}
    </style>
 </head>
 <body>
     <div class="ui container">
    <h1>Generate Markdown Formatted Minutes for the DID WG</h1>

    <details class="ui segment" style="display: none">
        <summary class="header">Description</summary>
        <p>
            This is a browser based interface to service that converts the IRC logs generated by <a href="https://www.w3.org/2002/03/RRSAgent">RRSAgent</a> into minutes in Markdown. The underlying <a href="https://github.com/w3c/scribejs/">tool</a> is based on a Node.js converter; this page provides a somewhat simpler interface than the complete command-line tool (see <a href="https://github.com/w3c/scribejs/blob/master/README.md">for the complete description</a>). A more detailed description of the options is available <a href="#explanation">below</a>. The generated Markdown minutes will be displayed on the screen and can be saved locally; actions assigned during the call may be stored as special github issues.
        </p>

        <p>
            Note that the scribing features defined by <a href="https://dev.w3.org/2002/scribe/scribedoc.htm">David Booth’s script</a> are mostly maintained with some minor additions; see the separate <a href="https://github.com/w3c/scribejs/blob/master/features.md">feature description</a> for those.</p>
        </p>

        <p>To identify the IRC log one can:</p>

        <ol>
            <li>Provide a textual IRC log.</li>
            <li>Upload a IRC log file from your local disc.</li>
            <li>Give the exact date and IRC channel name of the meeting, fetch the IRC log from the W3C Web site.<br/>
                Note that this works for public IRC logs only. At this moment the script is not (yet) prepared to properly handle access control.
            </li>
        </ol>

        <p>
            The form can be populated with presets or filled in by hand. (A “preset” an item in the browser’s Web Storage of the content of the form. The values remain available on a per-browser basis and stay in the client. Use the <a href="#manage_presets">the form below</a> to manage those.)
        </p>

        <p>
            Note that all the boxes (except the Markdown preview) are <em>editable</em>, so it is possible to modify them before downloading the final minutes. One possible workflow is to fetch the IRC log and then edit it before converting it to handle minor issues that have a major consequence on the minutes, e.g., manually add a `scribenick: XYZ` statement if it was forgotten during the call, or add a `scribejs, set A B C` (see <a href="https://github.com/w3c/scribejs/blob/master/features.md#scribejs-tools">the for details</a>) if the minute taker did not use the IRC nicknames of a person.
        </p>

    </details>

    <div class="ui form">
        <div class="inline field">
            <label for="presets">Choose a preset (use it to store your github name and token value locally):</label>
            <select name="presets" id="presets" style="width: 20em">
                <!-- <option value="None" selected="True">None</option> -->
            </select>
            <input title="Reset form" id="reset" value="Reset form" type="button" class="ui small button">
        </div>
    </div>

    <hr class="ui divider" />

    <form id="main_form" class="ui form">
        <fieldset id="group_data" class="ui horizontal segment">
            <legend class="ui small grey sub header">Group data</legend>
            <div class="ui stackable grid">
                <div class="nine wide column">
                    <div class="inline field" style="display:none">
                        <label for="group">IRC channel:</label>
                        <div class="ui labeled input">
                            <div class="ui label">#</div>
                            <input name="group" id="group" size="75" type="text" value="did" required>
                        </div>
                    </div>
                    <div class="inline field" style="display:none">
                        <label for="nicknames">Nickname URL:</label>
                        <input name="nicknames" id="nicknames" size="80" type="text" value="https://www.w3.org/2019/did-wg/assets/nicknames.json">
                    </div>
                    <div class="inline field" style="display:none">
                        <label for="jekyll">Adapt the output to Jekyll:</label>
                        <select id="jekyll" name="jekyll" size="1" style="width:13em">
                            <option value="none">No</option>
                            <option value="md">Yes, using Markdown</option>
                            <option selected="selected" value="kd">Yes, using Kramdown</option>
                        </select>
                    </div>
                    <div class="inline field" style="display:none">
                        <label for="final">Are the minutes final:</label>
                        <select id="final" name="final" size="1">
                            <option selected="selected" value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                    </div>
                    <div class="inline field" style="display:none">
                        <label for="issuerepo">Default repository for discussion issues:</label>
                        <input name="issuerepo" id="issuerepo" size="80" type="text" value="w3c/did-core">
                    </div>
                    <fieldset id="action_issues" class="ui horizontal segment">
                        <legend class="ui small grey sub header">Action issues (only fill in if actions are used)</legend>
                        <div class="ui stackable grid">
                            <div class="nine wide column">
                                <div class="inline field" style="display:none">
                                    <label for="acrepo">Repository for action issues:</label>
                                    <input name="acrepo" id="acrepo" size="77" type="text" value="https://github.com/w3c/did-wg">
                                </div>
                                <div class="inline field" style="display:none">
                                    <label for="acurlpattern">URL pattern used for minutes:</label>
                                    <input name="acurlpattern" id="acurlpattern" size="77" type="text" value="https://www.w3.org/publishing/groups/did-wg/Meetings/Minutes/%YEAR%/%DATE%-did-topic">
                                </div>
                                <div class="inline field">
                                    <label for="ghname">Github id:</label>
                                    <input name="ghname" id="ghname" size="77" type="text">
                                </div>
                                <div class="inline field">
                                    <label for="ghtoken">Personal github token:</label>
                                    <input name="ghtoken" id="ghtoken" size="77" type="password">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="seven wide column">
                <fieldset id="manage_presets" class="ui horizontal segment">
                    <legend class="ui small grey sub header">Manage Presets</legend>
                    <div class="inline field">
                        <label for="fullname">Preset Name:</label>
                        <input id="fullname" name="fullname" size="50" type="text">
                    </div>
                    <div class="fields">
                        <div class="field">
                            <input class="preset_control ui tiny positive button" id="store_preset" name="store_preset" value="Store" type="button">
                        </div>
                        <div class="field">
                            <input class="preset_control ui tiny negative button" id="remove_preset" name="remove_preset" value="Remove" type="button">
                        </div>
                        <div class="field">
                            <button class="preset_control ui tiny negative button" id="clear_presets" name="clear_presets" type="button">
                                <i class="trash alternate icon"></i> Clear All Presets
                            </button>
                        </div>
                    </div>
                </fieldset>
                </div>
            </div>
        </fieldset>
        <fieldset id="irc_options" class="ui segment">
            <legend class="ui small grey sub header">IRC log</legend>
            <div class="main-options ui grid">
                <div class="twelve wide column">
                    <div class="ui field">
                        <label for="text">IRC log:</label>
                        <textarea id="text" name="irclog_text" rows="15" cols="90"></textarea>
                    </div>
                </div>
                <div class="four wide column">
                    <div class="ui field">
                        <label for="date">Date:</label>
                        <input name="date" id="date" size="70" type="date">
                    </div>
                    <div class="ui field">
                        <label for="irclog">Fetch IRC log from W3C:</label>
                        <input class="load ui positive button" type="button" id="fetch_log" name="irclog" value="fetch">
                    </div>
                    <div class="ui horizontal divider">OR</div>
                    <div class="ui field">
                        <label for="uploaded_log">Upload a local IRC log file:</label>
                        <input name="irclog_file" id="upload_log" type="file" width="40">
                    </div>
                </div>
            </div>
        </fieldset>
        <div class="ui horizontal divider">
            <button title="Submit for minute generation" id="submit_button" class="ui huge positive button" type="button">
                <i class="arrow alternate circle down icon"></i>
                Generate Minutes
            </button>
        </div>
    </form>

    <fieldset id='minutes_frame' class="ui form segment">
        <legend class="ui small grey sub header">Generated Minutes</legend>
        <div class="field">
            <div class="ui toggle checkbox">
              <input type="checkbox" name="preview_markdown" id="preview_markdown">
              <label for="preview_markdown">Preview Markdown</label>
            </div>
        </div>
        <!-- editor or previewer -->
        <div class="ui active tab" id="editor-tab">
            <div class="field">
                <textarea name="minutes" id="minutes" cols="100" rows="20"></textarea>
            </div>
        </div>
        <div class="ui tab" id="previewer-tab">
            <div class="ui segment field" style="max-height: 28em;overflow:auto">
                <div class="ui top left attached label">Preview</div>
                <div id="preview"></div>
            </div>
        </div>
        <div class="field">
            <button title='save' id='save' type='button' class="ui positive button">
                <i class="download icon"></i> Save Markdown
            </button>
            <a style='display:none' id='download'>test</a>
        </div>
    </fieldset>


    <hr class="ui divider" />

    <h2 id="explanation">Description of the options</h2>

    <p>
        The options mostly map onto flags available for the <a href="https://github.com/w3c/scribejs/blob/master/README.md">command-line version</a> of the tool. Note that not all features are available: most notably it is not (yet?) possible, at this moment, to use GitHub related facilities.
    </p>

    <p>The form options are as follows.</p>

    <dl>
        <dt>Group data</dt>
        <dd>
            <dl>
                <!-- <dt>IRC channel</dt>
                <dd>
                    The name of the IRC channel (without the # sign). Used for the URL of the IRC log on the W3C site.
                </dd>

                <dt>Nickname URL</dt>
                <dd>
                    Identify a JSON data file providing a mapping from IRC nicknames to real names. Used to display the participants’ proper name everywhere in the minutes. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#nickname-mapping">the more detailed description</a> for further details.<br/>
                    Note that if the nickname is available on the user’s machine, then an (absolute) file name can also be used in place of the nicknames.
                </dd>

                <dt>Adapt the output to Jekyll</dt>
                <dd>
                    If the generated minutes are part of a Web site served on GitHub via a <a href="https://help.github.com/articles/about-github-pages-and-jekyll/">Github+Jekyll</a> combination, then this flag provides some useful additions and/or alternatives. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#Jekylloption">the more detailed description</a> for further details.
                </dd>

                <dt>Default repository for discussion issues</dt>
                <dd>
                    This repository is used to expand, in the minutes, references to issues (or pull requests) to their full URL and add these to the minutes.
                </dd>

                <dt>Are the minutes final</dt>
                <dd>
                    By default, minutes are considered as “draft”, and labeled as such. This may be important for groups that follow the procedure to “finalize” the minutes only after a 5 days’ period when resolutions may be objected to. If the minutes are labeled as “final”, no such extra notice is added to the minutes.
                </dd>

                <dt>Repository for actions issues</dt>
                <dd>
                    If this, and subsequent, values are set, actions assigned on the call, and extracted from the IRC log, result in issues raised on this repository. The format of the repository must be of "<code>owner/reponame</code>".
                </dd>

                <dt>URL pattern used for the minutes</dt>
                <dd>
                    If set, the pattern is used to denote the way the final minutes are stored. This value is used to put cross references to the relevant action issues. The pattern may use the variables <code>%YEAR%</code>, <code>%MONTH%</code>, <code>%DAY%</code>, and <code>%DATE%</code>.
                    <br>
                    If this value is set, the last part of the URL pattern is also used as the default name of the final minutes, if and when stored on the local disc.
                </dd> -->

                <dt>Github id</dt>
                <dd>
                    Github id of the user. The user must have a write access to the repository for action issues.
                </dd>

                <dt>Personal github token</dt>
                <dd>
                    Personal github token, providing access to the repository to raise issues. See the <a href="https://github.com/settings/tokens">relevant github page</a> for further details.
                </dd>
            </dl>
        </dd>

        <dt>IRC log</dt>
        <dd>
            <dl>
                <dt>IRC log</dt>
                <dd>Text box containing the IRC log. The user can also edit this text; it is <em>the</em> log to be transformed.</dd>

                <dt>Local file to upload</dt>
                <dd>Load a file locally.</dd>

                <dt>Date</dt>
                <dd>
                    In case the date is not “today”, provide a date for the minutes. If the log is loaded from W3C’s “date space”, this value is used to create a URL that follows the patterns used by RRSAgent.
                </dd>

                <dt>Log fetched from W3C</dt>
                <dd>
                    When activating the button, the system fetches the log from the W3C “date space” and copies the content into the text field.
                </dd>
            </dl>
        </dd>

        <dt>Generated minutes</dt>
        <dd>
            <dl>
                <dt>Generated Minutes</dt>
                <dd>
                    Text box containing the generated Markdown minutes. The user can also edit this text; it is <em>the</em> content to be saved.
                </dd>

                <dt>Save</dt>
                <dd>
                    Save the file in the local file system.
                </dd>
            </dl>
        </dd>


        <!-- <dt>Github Repository Options</dt>
        <dd>
            <dl>
                <dt>Upload results to Github</dt>
                <dd>Whether the resulting minutes should be uploaded to github automatically or returned to the browser</dd>

                <dt>Name</dt>
                <dd>Name of the repository, e.g., <code>w3c/publ-wg</code> </dd>

                <dt>Path</dt>
                <dd>Path of the folder within the repository where the minutes should be stored (without starting or trailing slash characters). Minutes are stored using the <code>Minutes-[date].md</code></dd>

                <dt>Branch</dt>
                <dd>Git branch to be used (defaults to <code>master</code>)</dd>
            </dl>

            <p>
                Note, however, that there are private information that <em>cannot</em> be set through this interface, namely the name, email address, and the OAUTH key (see for a <a href="https://github.com/w3c/scribejs/blob/master/README.md#conf">description</a> of those). These must be installed by the system administrator in a <code>CGI-executable/.scribejs.json</code> file, following the syntax <a href="https://github.com/w3c/scribejs/blob/master/README.md#conf">of the configuration files</a>.
            </p>
        </dd> -->

        <dt>Manage Presets</dt>
        <dd>
            <dl>
                <dt>Group’s full name</dt>
                <dd>
                    This is not used in the generated minutes; instead, it is a purely mnemonic name used to identify an entry when choosing a preset.
                </dd>

                <dt>Store Preset</dt>
                <dd>
                    Store a preset into the browser’ local storage. Note that the preset is identified with the IRC channel name; if an entry with that name already exists in the local storage, it is overwritten.
                </dd>

                <dt>Remove Preset</dt>
                <dd>
                    Remove a preset from the browser’ local storage. The preset is identified with the IRC channel name.
                </dd>

                <dt>Remove All Presets</dt>
                <dd>Remove all presets from the browser’ local storage.</dd>
            </dl>
        </dd>
    </dl>
    <!-- <h2>Example presets</h2>

    <h3>Publishing Working Group</h3>
    <dl>
        <dt>IRC channel</dt>
        <dd>pwg</dd>
        <dt>Nickname URL</dt>
        <dd>https://www.w3.org/publishing/groups/publ-wg/assets/nicknames.json</dd>
        <dt>Adapt output to Jekyll</dt>
        <dd>Yes, using Kramdown</dd>
        <dt>Are the minutes final</dt>
        <dd>No</dd>
    </dl>

    <h3>Publishing Business Group</h3>
    <dl>
        <dt>IRC channel</dt>
        <dd>pbg</dd>
        <dt>Nickname URL</dt>
        <dd>https://w3c.github.io/publ-bg/assets/nicknames.json</dd>
        <dt>Adapt output to Jekyll</dt>
        <dd>Yes, using Kramdown</dd>
        <dt>Are the minutes final</dt>
        <dd>Yes</dd>
    </dl>

    <h3>JSON-LD Working Group</h3>
    <dl>
        <dt>IRC channel</dt>
        <dd>json-ld</dd>
        <dt>Nickname URL</dt>
        <dd>https://www.w3.org/2018/json-ld-wg/assets/nicknames.json</dd>
        <dt>Adapt output to Jekyll</dt>
        <dd>Yes, using Kramdown</dd>
        <dt>Are the minutes final</dt>
        <dd>No</dd>
        <dt>Repository for action issues</dt>
        <dd>w3c/json-ld-wg</dd>
        <dt>URL pattern used for minutes</dt>
        <dd>https://www.w3.org/2018/json-ld-wg/Meetings/Minutes/%YEAR%/%DATE%-json-ld</dd>
        <dt>Github id:</dt>
        <dd>&lt;yourid&gt; (e.g., iherman)</dd>
        <dt>Personal github token</dt>
        <dd>xyz.....</dd>

    </dl>

    <h3>DID Working Group</h3>
    <dl>
        <dt>IRC channel</dt>
        <dd>did</dd>
        <dt>Nickname URL</dt>
        <dd>https://github.com/w3c/did-wg/blob/master/assets/nicknames.json</dd>
        <dt>Adapt output to Jekyll</dt>
        <dd>Yes, using Kramdown</dd>
        <dt>Are the minutes final</dt>
        <dd>No</dd>
        <dt>Repository for action issues</dt>
        <dd>w3c/did-wg</dd>
        <dt>URL pattern used for minutes</dt>
        <dd>https://www.w3.org/2019/did-wg/Meetings/Minutes/%DATE%-did</dd>
        <dt>Github id:</dt>
        <dd>&lt;yourid&gt; (e.g., iherman)</dd>
        <dt>Personal github token</dt>
        <dd>xyz.....</dd>
    </dl> -->

    <hr class="ui divider" />
    <p style='font-size: 85%; margin-bottom: 1em'>Scripts running on this page make use of ECMAScript 2015 (ES6) features as well as async functions. See, e.g., <a href="https://caniuse.com/#feat=es6">caniuse</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function#Browser_compatibility">MDN</a> for browser availability.</p>

    <p style='font-size: 85%; margin-bottom: 1em'>Maintainers: <a href="https://github.com/iherman">Ivan Herman</a> and <a href="http://bigbluehat.com/">BigBlueHat</a>.</p>

    </div>
</body>
</html>
